<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-11-08">

<title>ANT 6973: Data Visualization and Exploration - Small project 2: Pick your poison</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Small project 2: Pick your poison</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../policies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Policies</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#description-of-example-data-sets" id="toc-description-of-example-data-sets" class="nav-link" data-scroll-target="#description-of-example-data-sets">Description of example data sets</a>
  <ul class="collapse">
  <li><a href="#research-funding-bias" id="toc-research-funding-bias" class="nav-link" data-scroll-target="#research-funding-bias">1. Research funding bias</a></li>
  <li><a href="#pollling-data-from-us-2016-presidential-elections" id="toc-pollling-data-from-us-2016-presidential-elections" class="nav-link" data-scroll-target="#pollling-data-from-us-2016-presidential-elections">2. Pollling data from US 2016 presidential elections</a></li>
  <li><a href="#primate-fruit-patch-visits" id="toc-primate-fruit-patch-visits" class="nav-link" data-scroll-target="#primate-fruit-patch-visits">3. Primate fruit patch visits</a></li>
  <li><a href="#hourly-temperature-measurements-in-kenya" id="toc-hourly-temperature-measurements-in-kenya" class="nav-link" data-scroll-target="#hourly-temperature-measurements-in-kenya">4. Hourly temperature measurements in Kenya</a></li>
  </ul></li>
  <li><a href="#instructions" id="toc-instructions" class="nav-link" data-scroll-target="#instructions">Instructions</a>
  <ul class="collapse">
  <li><a href="#content-instructions" id="toc-content-instructions" class="nav-link" data-scroll-target="#content-instructions">Content Instructions</a></li>
  <li><a href="#formatting-instructions" id="toc-formatting-instructions" class="nav-link" data-scroll-target="#formatting-instructions">Formatting Instructions</a></li>
  <li><a href="#evaluation-criteria" id="toc-evaluation-criteria" class="nav-link" data-scroll-target="#evaluation-criteria">Evaluation Criteria</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Small project 2: Pick your poison</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 8, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this small project, you will again think of questions to ask of one or more data sets and use various R functions and plots to address those questions.</p>
<p>But this time, there are <strong>multiple options</strong> for the data sets.</p>
<ol type="1">
<li><p>You can use one or more of the data sets listed below. All of your questions can be about the same data set or different data sets.</p></li>
<li><p>You can bring your own data set, but if you choose this option, bear in mind that your final project asks you to find a data set related to your theis or interests, and any plots you make for this small project should not be duplicated in the final project.</p></li>
</ol>
<p>All your questions can be from one data set, or you can ask different questions of different data sets. It’s up to you. Please see the detailed descriptions of the example data set at the bottom of the page.</p>
<p><br></p>
</section>
<section id="description-of-example-data-sets" class="level2">
<h2 class="anchored" data-anchor-id="description-of-example-data-sets">Description of example data sets</h2>
<section id="research-funding-bias" class="level3">
<h3 class="anchored" data-anchor-id="research-funding-bias">1. Research funding bias</h3>
<p><img src="research-funding-gender-bias.jpg" class="img-fluid"></p>
<p>Data on gender bias in research funding in the Netherlands. From van der Lee and Ellemers (2015), <em>PNAS</em>, <a href="https://www.pnas.org/content/112/40/12349">“Gender contributes to personal research funding success in The Netherlands”</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><i class="fa-solid fa-download" aria-label="download"></i> &nbsp;<a href="data/research_funding.csv" download="research_funding.csv">research_funding.csv</a></p>
</div>
</div>
</div>
<p><u>Columns</u>:</p>
<ul>
<li><code>discipline</code>: Research area discipline.</li>
<li><code>applications_men</code>: Total applications by men.</li>
<li><code>applications_women</code>: Total applications by women.</li>
<li><code>awards_men</code>: Total awards received by men.</li>
<li><code>awards_women</code>: Total awards received by women.</li>
<li><code>success_rates_men</code>: Success rate for men.</li>
<li><code>success_rates_women</code>: Success rate for women.</li>
</ul>
<p><br><br></p>
</section>
<section id="pollling-data-from-us-2016-presidential-elections" class="level3">
<h3 class="anchored" data-anchor-id="pollling-data-from-us-2016-presidential-elections">2. Pollling data from US 2016 presidential elections</h3>
<p><img src="fte-polls-2016.png" class="img-fluid"></p>
<p>Poll results from US 2016 presidential elections. Data from <a href="https://projects.fivethirtyeight.com/2016-election-forecast/national-polls/">FiveThirtyEight</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><i class="fa-solid fa-download" aria-label="download"></i> &nbsp;<a href="data/fte_polls_2016.csv" download="fte_polls_2016.csv">fte_polls_2016.csv</a></p>
</div>
</div>
</div>
<p><u>Columns</u>:</p>
<ul>
<li><code>state</code>: State in which poll was taken. “U.S” is for national polls.</li>
<li><code>startdate</code>: Poll’s start date.</li>
<li><code>enddate</code>: Poll’s end date.</li>
<li><code>pollster</code>: Pollster conducting the poll.</li>
<li><code>grade</code>: Grade assigned by fivethirtyeight to pollster.</li>
<li><code>samplesize</code>: Sample size.</li>
<li><code>population</code>: Type of population being polled. A = all adults, RV = registered voters, LV = likely voters, V = voters</li>
<li><code>rawpoll_clinton</code>: Percentage for Hillary Clinton.</li>
<li><code>rawpoll_trump</code>: Percentage for Donald Trump</li>
<li><code>rawpoll_johnson</code>: Percentage for Gary Johnson</li>
<li><code>rawpoll_mcmullin</code>: Percentage for Evan McMullin.</li>
<li><code>adjpoll_clinton</code>: Fivethirtyeight adjusted percentage for Hillary Clinton.</li>
<li><code>ajdpoll_trump</code>: Fivethirtyeight adjusted percentage for Donald Trump</li>
<li><code>adjpoll_johnson</code>: Fivethirtyeight adjusted percentage for Gary Johnson</li>
<li><code>adjpoll_mcmullin</code>: Fivethirtyeight adjusted percentage for Evan McMullin.</li>
</ul>
<p><br><br></p>
</section>
<section id="primate-fruit-patch-visits" class="level3">
<h3 class="anchored" data-anchor-id="primate-fruit-patch-visits">3. Primate fruit patch visits</h3>
<p><img src="capuchin-juv.jpg" class="img-fluid"></p>
<p>Characteristics of fruit-producing trees visited by several capuchin groups over a 4-year period.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><i class="fa-solid fa-download" aria-label="download"></i> &nbsp;<a href="data/ssr_fpv.csv" download="ssr_fpv.csv">ssr_fpv.csv</a></p>
</div>
</div>
</div>
<p><u>Columns</u>:</p>
<ul>
<li><code>group</code>: Code of capuchin group that visited the tree.</li>
<li><code>scientific_name</code>: Scientific name of the tree species.</li>
<li><code>timestamp</code>: Date and time of the visit.</li>
<li><code>elevation</code>: Elevation of tree in meters.</li>
<li><code>num_monkeys</code>: Number of monkeys observed eating in the tree.</li>
<li><code>leaf_cover</code>: Leaf cover score on 1–4 scale (0 = no leaves, 4 = full of leaves)</li>
<li><code>leaf_maturity</code>: Leaf maturity score on 1–4 scale (0 = no mature leaves, 4 = 100% of leaves present are mature leaves)</li>
<li><code>fruit_cover</code>: Fruit cover score on 1–4 scale (0 = no fruit, 4 = full of fruit)</li>
<li><code>fruit_maturity</code>: Fruit maturity score on 1–4 scale (0 = no ripe fruit, 4 = 100% of fruits present are ripe)</li>
<li><code>flower_cover</code>: Flower cover score on 1–4 scale (0 = no flowers, 4 = full of flowers)</li>
<li><code>flower_maturity</code>: Flower maturity score on 1–4 scale (0 = no mature flowers, 4 = 100% of flowers present are mature)</li>
<li><code>trunk_diameter_cm</code>: Diameter at breast height of the tree trunk.</li>
<li><code>fruit_avail_index</code>: A ripe fruit “availability index” ranging from 0 (no ripe fruit) to 1 (completely full of ripe fruit). Calculated as (fruit_cover / 4) * (fruit_maturity / 4).</li>
<li><code>fruit_biomass_kg</code>: Estimated biomass of available ripe fruit.</li>
<li><code>lon</code>: Geographic longitude coordinate (crs = 4326)</li>
<li><code>lat</code>: Geographic latitude coordinate (crs = 4326)</li>
</ul>
<p><br><br></p>
</section>
<section id="hourly-temperature-measurements-in-kenya" class="level3">
<h3 class="anchored" data-anchor-id="hourly-temperature-measurements-in-kenya">4. Hourly temperature measurements in Kenya</h3>
<p><img src="amboseli.png" class="img-fluid"></p>
<p>Air temperature recorded hourly during 2016 by a weather station located in Amboseli national park, Kenya.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><i class="fa-solid fa-download" aria-label="download"></i> &nbsp;<a href="data/amboseli_weather_2016.csv" download="amboseli_weather_2016.csv">amboseli_weather_2016.csv</a></p>
</div>
</div>
</div>
<p><u>Columns</u>:</p>
<ul>
<li><code>year_of</code>: Year</li>
<li><code>month_of</code>: Abbreviation of month</li>
<li><code>date_of</code>: Date of temperature reading</li>
<li><code>0</code>: Air temperature at hour 0 (midnight)</li>
<li><code>1</code>: Air temperature at hour 1 (1 am)<br>
…<br>
…<br>
</li>
<li><code>22</code>: Air temperature at hour 22 (10 pm)</li>
<li><code>23</code>: Air temperature at hour 23 (11 pm)</li>
</ul>
<p><br><br></p>
</section>
</section>
<section id="instructions" class="level2">
<h2 class="anchored" data-anchor-id="instructions">Instructions</h2>
<section id="content-instructions" class="level3">
<h3 class="anchored" data-anchor-id="content-instructions">Content Instructions</h3>
<ul>
<li>Think of three (and only three!) conceptual questions about any of the data sets. Clearly state each question in your report. You might want to create different sections for your different questions.</li>
<li>Using <code>dplyr</code> and/or <code>tidyr</code>, manipulate the data as necessary to get it into shape for plotting.</li>
<li>Using <code>ggplot2</code>, create <em>at least one plot for each question</em> that helps you to answer the question. For each plot, provide an explanation for why you chose the <em>type</em> of plot (e.g.&nbsp;scatterplot, boxplot, bar chart, histogram, etc.), and why you believe that it is best for showing the information related to your question.</li>
<li>Answer your questions by interpreting your plots and identifying any trends that they reveal (or do not reveal).</li>
<li>In total, your text related to the conceptual questions, plot design decisions, and interpretation should be in the neighborhood of 1000 words.</li>
<li>In your report,
<ul>
<li><strong>Use at least 3 different <code>dplyr</code> verbs</strong>. This can include, but is not limited to, <code>filter()</code>, <code>arrange()</code>, <code>select()</code>, <code>mutate()</code>, and <code>slice()</code>.</li>
<li><strong>Use at least 1 <code>tidyr</code> verb</strong>. This can include, but is not limited to, <code>pivot_longer()</code>, <code>pivot_wider()</code>, <code>unite()</code>, and <code>separate()</code>.</li>
<li><strong>Use at least 3 different <code>ggplot2</code> geoms.</strong></li>
</ul></li>
</ul>
<p><br></p>
</section>
<section id="formatting-instructions" class="level3">
<h3 class="anchored" data-anchor-id="formatting-instructions">Formatting Instructions</h3>
<ul>
<li>The project report should look similar to some of our class activities, but it should include more narrative/explanation along with the code and plots.</li>
<li>Please create your report in an Quarto file called <code>small-project-2_XX.qmd</code>, where you substitute your initials for “XX” (for example, my report would be called <code>small-project-2_FC.qmd</code>.</li>
<li>The Quarto report should show all of the code that you used to work with the data and produce your plots.</li>
<li><strong>Submit your report (in <code>.html</code> and <code>.qmd</code> formats) through Canvas.</strong></li>
</ul>
<p><br></p>
</section>
<section id="evaluation-criteria" class="level3">
<h3 class="anchored" data-anchor-id="evaluation-criteria">Evaluation Criteria</h3>
<p>Projects will be graded on workflow and presentation rather than particular conclusions. <em>So don’t worry if you ask a question that fails to turn up interesting results!</em> The data are what they are.</p>
<p>To receive full credit, I am looking for:</p>
<ul>
<li>Clear, coherent questions about the data. Questions end in a question mark!</li>
<li>The data manipulations should be <strong>purposeful</strong>—they should be used to get the data into shape for answering your questions and plotting.</li>
<li>Each plot that you include in the report should help to answer one of your proposed questions, with a justification for <em>why</em> you chose to make the type of plot that you made. I am not looking for a dumping ground of many preliminary or poor-quality plots that you experimented with while trying to make a good one.</li>
<li>Interpretation of your plots and responses to your proposed question.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>